<!DOCTYPE html>
<html>
  <head> 
    <title>Data</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script
            src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            crossorigin="anonymous"></script>
  </head>
  <style type="text/css">
       body {
  background-image: url('https://img.rawpixel.com/s3fs-private/rawpixel_images/website_content/pf-misctexture01-beer-032_1.jpg?w=800&dpr=1&fit=default&crop=default&q=65&vib=3&con=3&usm=15&bg=F4F4F3&ixlib=js-2.2.1&s=c5b50a1c0fe30ea91b3c769b294c8e64'); 
  background-size: cover;
  
}
#editBook{
  display: flex;
  flex-direction: column;
  align-items: center;
}
#editHobby{
  display: flex;
  flex-direction: column;
  align-items: center;
}
button{
   background-color: rgb(173 216 230);
    border: none;
    border-radius: 10px 10px;
    padding: 8px;
    font-size: 15px;
    color: black;
    cursor: pointer;
    margin-right: 20px;
    margin-top: 10px;
}
label{
  font-size: 20px;
  
}
input{
  border-radius: 8px;
  border:none;
  padding: 5px;
}
input[type=text]{
  width: 35%;
  padding: 15px;
}
#editHobby div{
  background-color: white;
  border-radius: 20px 20px;
  margin-bottom: 20px; 
  width: 37%;
}
#editBook div{
  background-color: white;
  border-radius: 20px 20px;
  margin-bottom: 20px; 
  width: 37%;
}
input[type=radio]{
  margin-left: 37px;margin-bottom: 20px; 
}
input[type=checkbox]{
  margin-left:37px;
  margin-bottom: 20px;
}
  </style>

  <body onload="loadEditItem()">

 <a href="/logout">Sing Out</a>


    <div id="editBook">
    <label>Full name</label>
    <input type="text" id="fullName"><br>
    <label>Title</label>
    <input type="text" id="title"><br>
    <label>Author</label>
    <input type="text" id="author"><br>
    <label>Colour</label>
    <input type="text" id="colour"><br>
    <div>
    <label for="coverType" style="font-size: 20px; margin-left:37px;margin-top:37px;margin-bottom: 20px;
            display:inline-block;">Cover Type</label>
            <br>
            <input class="cover1" id="checkCoverPaperBack" type="radio" name="coverType" value = "paperBack" >
            <label id="cover1" value="paperBack" for="vehicle2" style="font-size: 18px;">PaperBack</label><br>
            <input class="cover2" id="checkCoverHardcover" type="radio" name="coverType" value="hardcover">
            <label id="cover2" value="hardcover" for="vehicle2" style="font-size: 18px;">Hardcover</label><br>
            <input class="other" id="checkCoverOther"type="radio" name="coverType">
            <label for="vehicle3">Other:</label>
            <span id="coverSpan">
                <input id="coverInput" type="text" name="other" style="border:none;
                                                                  border-bottom:1px solid rgb(211, 208, 208);
                                                                  margin-bottom: 20px;">
            </span>
    </div>
    <label>Number of pages</label>
    <input type="text" id="page"><br>
    <label>Price</label>
    <input type="text" id="price"><br>
    <label>Currency</label>
    <input type="text" id="currency"><br>
    <div>
    <label for="fullname" style=" margin-left:37px;margin-top:37px;margin-bottom: 20px;
            display:inline-block;">Language</label>
            <br>
            <input class="language1" id="checkEnglish" type="radio" name="language" value="english">
            <label id="language1" for="vehicle1" > English</label><br>
            <input class="language2" id="checkArmenian" type="radio" name="language" value="armenian">
            <label id="language2" for="vehicle2" >Armenian</label><br>
            <input class="language3" type="radio" id="checkRussian" name="language" value="russian">
            <label id="language3" for="vehicle3" >Russian</label><br>
            <input class="language4" type="radio" id="checkFrench" name="language" value="french" >
            <label id="language4" for="vehicle4" >French</label><br>
            <input id="checkLanguageOther" class="other" type="radio" name="language">
            <label for="vehicle4">Other:</label>
            <span id="languageSpan">
                <input id="languageInput" type="text" name="other" style="border:none;
                                                                  border-bottom:1px solid rgb(211, 208, 208);
                                                                  margin-bottom: 20px;">
            </span>
            </span>
          </div>
          <div>
     <label for="fullname" style=" margin-left: 37px; margin-top:37px;margin-bottom: 20px;
            display:inline-block;">Original language</label>
            <br>
            <input id="checkOriginEnglish" class="originalLanguage1" type="radio" name="originalLanguage" value="english">
            <label id="originalLanguage1" for="vehicle1" > English</label><br>
            <input  id="checkOriginRussian"class="originalLanguage2" type="radio" name="originalLanguage" value="russian">
            <label id="originalLanguage2" for="vehicle2">Russian</label><br>
            <input id="checkOriginFrench" class="originalLanguage3" type="radio" name="originalLanguage" value="french">
            <label id="originalLanguage3" for="vehicle3" >French</label><br>
            <input id="checkOriginArmenian" class="originalLanguage4" type="radio" name="originalLanguage" value="armenian">
            <label id="originalLanguage4" for="vehicle4">Armenian</label><br>
            <input id="checkOriginLanguageOther" class="other" type="radio" name="originalLanguage" >
            <label for="vehicle4">Other:</label>
            <span id="originLanguageSpan">
                <input id="originLanguageInput" type="text" name="other" style="border:none;
                                                                  border-bottom:1px solid rgb(211, 208, 208);
                                                                  margin-bottom: 20px;">
            </span>
          </div>
    <label>Edition</label>
    <input type="text" id="edition"><br>
    <label>Dimensions</label>
    <input type="text" id="dimensions"><br>
    <label>Publisher</label>
    <input type="text" id="publisher"><br>
    <label>Publishing date</label>
    <input type="text" id="pubDate"><br>
    <label>Original Publishing Date</label>
    <input type="text" id="origPubDate"><br>
    <label>Genre</label>
    <input type="text" id="genre"><br>
    <label>Age restriction</label>
    <input type="text" id="age">
    <button onclick="updateBook()">Update</button>
</div>
<script type="text/javascript">

    
function updateBook() {
 let labelCover,leblelanguage,lebleOriginalLanguage;
  localStorage = window.localStorage;
  editItem = JSON.parse(localStorage.getItem("editItem"));

if (document.getElementById("checkCoverHardcover").checked === true) {
    labelCover = "hardcover";
  } else if (document.getElementById("checkCoverPaperBack").checked === true) {
    labelCover = "paperBack";
  } else if(document.getElementById("checkCoverOther").checked === true){
    labelCover = document.getElementById("coverInput").value;
  }

  if (document.getElementById("checkEnglish").checked === true) {
    leblelanguage = "english";
  } else if (document.getElementById("checkArmenian").checked === true) {
    leblelanguage = "armenian";
  } else if (document.getElementById("checkRussian").checked === true) {
    leblelanguage = "russian";
  } else if (document.getElementById("checkFrench").checked === true) {
    leblelanguage = "french";
  } else if(document.getElementById("checkLanguageOther").checked === true){
    leblelanguage = document.getElementById("languageInput").value;
  }

  if (document.getElementById("checkOriginEnglish").checked === true) {
    lebleOriginalLanguage = "english";
  } else if (document.getElementById("checkOriginArmenian").checked === true) {
    lebleOriginalLanguage = "armenian";
  } else if (document.getElementById("checkOriginRussian").checked === true) {
    lebleOriginalLanguage = "russian";
  } else if (document.getElementById("checkOriginFrench").checked === true) {
    lebleOriginalLanguage = "french";
  }
  else if(document.getElementById("checkOriginLanguageOther").checked === true){
      lebleOriginalLanguage = document.getElementById("originLanguageInput").value;
  }
  let tmp = {
    "id" : editItem._id,
    "title" : document.getElementById("title").value,
    "fullName":document.getElementById("fullName").value,
    "author":document.getElementById("author").value, 
    "colour":document.getElementById("colour").value,
    "number":document.getElementById("page").value, 
    "price": document.getElementById("price").value,
    "currency":document.getElementById("currency").value,
    "edition": document.getElementById("edition").value,
    "publisher":document.getElementById("pubDate").value , 
    "genre":   document.getElementById("genre").value,
    "age": document.getElementById("age").value,
    "publisherDate": document.getElementById("publisher").value,
    "originalDate": document.getElementById("origPubDate").value,
    "coverType": labelCover ,
    "originalLanguage":lebleOriginalLanguage ,
    "language":leblelanguage
     
  }
  console.log(tmp);
    $.ajax({
        type: 'POST',
        url: "https://cse-120-2021-api-meri.herokuapp.com/data/update",
        data: tmp,
        cache: false,
        dataType : 'json',
        success: function (data) {
            console.log("success");
             document.location = "admin";
        },
        error: function (xhr) {
            console.error("Error in post", xhr);
        },
        complete: function () {
            console.log("Complete");  
        }
    });
}
    
function loadEditItem() {
  localStorage = window.localStorage;
  editItem = JSON.parse(localStorage.getItem("editItem"));
  console.log(editItem)
  const project = editItem.project


  if (editItem["coverType"]) {
      if (editItem["coverType"] == "hardcover") {
        document.getElementById("checkCoverHardcover").checked = true;
      } 
      else if (editItem["coverType"] == "paperBack") {
          document.getElementById("checkCoverPaperBack").checked = true;
      } else {
        document.getElementById("checkCoverOther").checked = true;
        document.getElementById("coverInput").value = editItem["coverType"];
      }
    }
    if(editItem["language"]){
      if(editItem["language"] == "english"){
        document.getElementById("checkEnglish").checked = true;
      }
      if(editItem["language"] == "armenian"){
        document.getElementById('checkArmenian').checked = true;
      }
      if(editItem["language"] == "russian"){
        document.getElementById('checkRussian').checked = true;
      }
      if(editItem["language"] == "french"){
        document.getElementById('checkFrench').checked = true;
      }
      else if(editItem["language"] != "english" && editItem["language"] != "armenian" && editItem["language"] != "russian" && editItem["language"] != "french"){
        document.getElementById('checkLanguageOther').checked = true;
        document.getElementById('languageInput').value = editItem["language"] ;

      }
    }

    if(editItem["originalLanguage"]){
      if(editItem["originalLanguage"] === "english"){
        document.getElementById("checkOriginEnglish").checked = true;
      }
      else if(editItem["originalLanguage"] === "armenian"){
        document.getElementById('checkOriginArmenian').checked = true;
      }
      else if(editItem["originalLanguage"] === "russian"){
        document.getElementById('checkOriginRussian').checked = true;
      }
      else if(editItem["originalLanguage"] === "french"){
        document.getElementById('checkOriginFrench').checked = true;
      }
      else if(editItem["originalLanguage"] !== "english" && editItem["originalLanguage"] !== "armenian" && editItem["originalLanguage"] !== "russian" && editItem["originalLanguage"] !== "french"){
        document.getElementById('checkOriginLanguageOther').checked = true;
        document.getElementById('originLanguageInput').value = editItem["originalLanguage"] ;
  
      }
    }

    document.getElementById("fullName").value = editItem["fullName"];
    document.getElementById("title").value = editItem["title"];
    document.getElementById("author").value = editItem["author"];
    document.getElementById("colour").value = editItem["colour"];
    document.getElementById("page").value = editItem["number"];
    document.getElementById("price").value = editItem["price"];
    document.getElementById("currency").value = editItem["currency"];
    document.getElementById("edition").value = editItem["edition"];
    document.getElementById("publisher").value = editItem["publisher"];
    document.getElementById("dimensions").value = editItem["dimensions"];
    document.getElementById("pubDate").value = editItem["publisherDate"];
    document.getElementById("origPubDate").value = editItem["originalDate"];
    document.getElementById("genre").value = editItem["genre"];
    document.getElementById("age").value = editItem["age"];
  }


</script>
  </body>

</html>
